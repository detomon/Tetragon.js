!function(t){"use strict";t.Tetragon=t.Tetragon||{version:"0.1.13"}}(window),function(){"use strict";(Tetragon.EntityComponent=function(t,i){this.id=t,this.name=i.name,this.options=i,this.construct=i.construct,this.destruct=i.destruct,this.data=[]}).prototype.iterate=function(t){var i,n=Array.prototype.slice.call(arguments,1);for(i in"string"==typeof t&&(t=this.options[t]),this.data)this.data.hasOwnProperty(i)&&t.apply(this.data[i],n)}}(),function(n){"use strict";var t=(n.EntitySystem=function(){this.entities=[],this.freeEntites=[],this.components=[],this.namedComponents={}}).prototype;t.component=function(t){return this.namedComponents[t]},t.createComponent=function(t){t=n.extend({construct:null,destruct:null},t);var i=this.components.length,i=new n.EntityComponent(i,t);return this.components.push(i),this.namedComponents[i.name]=i},t.entity=function(t){return void 0===this.entities[t]?null:new n.Entity(t,this)},t.createEntity=function(){var t=this.freeEntites.pop();return void 0===t&&(t=this.entities.length+1,this.entities.push(0)),new n.Entity(t,this)},t.iterate=function(t,i){var n=Array.prototype.slice.call(arguments,2),t=this.component(t);t&&(n.unshift(i),t.iterate.apply(t,n))}}(Tetragon),function(){"use strict";var t=(Tetragon.Entity=function(t,i){this.id=t,this.system=i}).prototype;t.addComponent=function(t){var i=Array.prototype.slice.call(arguments,1);if("string"==typeof t&&!(t=this.system.component(t)))return null;if(t.data[this.id-1])return null;var n={entity:this};return t.construct&&t.construct.apply(n,i),t.data[this.id-1]=n,this.system.entities[this.id-1]|=1<<t.id,n},t.removeComponent=function(t){return("string"!=typeof t||(t=this.system.component(t)))&&t.data[this.id-1]?(t.destruct&&t.destruct.apply(t.data[this.id-1]),delete t.data[this.id-1],void(this.system.entities[this.id-1]&=~(1<<t.id))):null},t.componentData=function(t){t=this.system.namedComponents[t];return t?t.data[this.id-1]:null},t.delete=function(){var t=0,i=this.system;if(void 0!==i.entities[this.id-1]){for(var n,e=i.entities[this.id-1];e;)255&e||(e>>=8,t+=8),1&e&&((n=i.components[t]).destruct&&n.destruct.apply(n.data[this.id-1]),delete n.data[this.id-1]),e>>=1,t++;delete i.entities[this.id-1],i.freeEntites.push(this.id)}}}(),function(i){"use strict";var t=(i.ParticleSystem=function(t){t=i.extend({construct:function(){}},t),this.options=t,this.particles=[]}).prototype;t.add=function(){var t={};return this.options.construct.apply(t,arguments),this.particles.push(t),t},t.iterate=function(t){var i,n=Array.prototype.slice.call(arguments,1),e=this.particles;"string"==typeof t&&(t=this.options[t]);var s={id:0,delete:function(){void 0!==e[i]&&(e[i]=e[e.length-1],e.length--,i--)}};for(n.unshift(s),i=0;i<e.length;i++)s.id=i,t.apply(e[i],n)},t.clear=function(){this.particles.length=0}}(Tetragon);
//# sourceMappingURL=tetragon.entity.min.js.map