!function(a){"use strict";a.Tetragon=a.Tetragon||{version:"0.1.9"}}(window),function(a){"use strict";var b=a.EntityComponent=function(a,b){this.id=a,this.name=b.name,this.options=b,this.construct=b.construct,this.destruct=b.destruct,this.data=[]},c=b.prototype;c.iterate=function(a){var b,c=Array.prototype.slice.call(arguments,1);"string"==typeof a&&(a=this.options[a]);for(b in this.data)this.data.hasOwnProperty(b)&&a.apply(this.data[b],c)}}(Tetragon),function(a){"use strict";var b=a.EntitySystem=function(){this.entities=[],this.freeEntites=[],this.components=[],this.namedComponents={}},c=b.prototype;c.component=function(a){return this.namedComponents[a]},c.createComponent=function(b){b=a.extend({construct:null,destruct:null},b);var c=this.components.length,d=new a.EntityComponent(c,b);return this.components.push(d),this.namedComponents[d.name]=d,d},c.entity=function(b){return void 0===this.entities[b]?null:new a.Entity(b,this)},c.createEntity=function(){var b=this.freeEntites.pop();return void 0===b&&(b=this.entities.length+1,this.entities.push(0)),new a.Entity(b,this)},c.iterate=function(a,b){var c=Array.prototype.slice.call(arguments,2),d=this.component(a);d&&(c.unshift(b),d.iterate.apply(d,c))}}(Tetragon),function(a){"use strict";var b=a.Entity=function(a,b){this.id=a,this.system=b},c=b.prototype;c.addComponent=function(a){var b=Array.prototype.slice.call(arguments,1);if("string"==typeof a&&(a=this.system.component(a),!a))return null;if(a.data[this.id-1])return null;var c={};return a.construct&&a.construct.apply(c,b),c.entity=this,a.data[this.id-1]=c,this.system.entities[this.id-1]|=1<<a.id,c},c.removeComponent=function(a){return("string"!=typeof a||(a=this.system.component(a)))&&a.data[this.id-1]?(a.destruct&&a.destruct.apply(a.data[this.id-1]),delete a.data[this.id-1],void(this.system.entities[this.id-1]&=~(1<<a.id))):null},c.componentData=function(a){var b=this.system.namedComponents[a];return b?b.data[this.id-1]:null},c["delete"]=function(){var a=0,b=this.system;if(void 0!==b.entities[this.id-1]){for(var c=b.entities[this.id-1];c;){if(255&c||(c>>=8,a+=8),1&c){var d=b.components[a];d.destruct&&d.destruct.apply(d.data[this.id-1]),delete d.data[this.id-1]}c>>=1,a++}delete b.entities[this.id-1],b.freeEntites.push(this.id)}}}(Tetragon);
//# sourceMappingURL=tetragon.entity.min.js.map